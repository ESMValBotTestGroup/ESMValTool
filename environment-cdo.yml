# this environment builds well with the latest
# mpi-agnostic cdo and all other tools needed by
# ESMValTool (note the versions: hdf5=1.10.5, proj4=6.1.1)
# unfortunately at this stage ncl is conflicting with the
# latest cdo and can not be installed in the same environment;
---
name: esmvaltool-cdo
channels:
  - conda-forge
  - esmvalgroup

dependencies:
  - cdo=1.9.7.1=h7d1db5e_1  # only mpi-agnostic 1.9.7.1
  - esmpy
  - esmvalcore>=2.0.0b0,<2.1
  - iris>=2.2
  - matplotlib<3  # Can be installed from PyPI, but is a dependency of iris and should be pinned.
  - python-stratify
  - xarray>=0.12.0  # Can be installed from PyPI, but here to get a consistent set of depencies with iris.
  - python>=3.6
  - libunwind  # Needed for Python3.7+
  - r-base
  - r-curl  # Dependency of lintr, but fails to compile because it cannot find libcurl installed from conda.
  - r-udunits2  # Fails to compile because it cannot find udunits2 installed from conda.
  # - julia>=1.0.0  # The Julia package on conda is apparently broken
