# SAFE ENVIRONMENT
#
# This is the SAFE environment that we can fallback at any time
# if there are issues with various packages versions as reported
# by conda; this was built 21/08/2019
#
# To be able to use it you will have to first create the
# esmvaltool-safe environment, activate it, install esmvalcore from
# source then instal esmvaltool.
---
name: esmvaltool-safe
channels:
  - conda-forge
  - esmvalgroup

dependencies:
  # Python packages that cannot be installed from PyPI:
  - esmpy=7.1.0=py37h24bf2e0_3
  # - esmvalcore>=2.0.0b0,<2.1 -> to be installed separately from source
  - iris=2.2.0=py37_1003
  - matplotlib=3.1.1=py37_1
  - python-stratify=0.1=py37h3010b51_1001
  - xarray=0.12.3=py_0
  # Non-Python dependencies
  - cdo=1.9.7.1=h7d1db5e_1  # the only mpi-agnostic v9.7 (1.9.7.1) for now
  - imagemagick=7.0.8_60=pl526h51306e4_0
  - nco=4.8.1=h0e20550_0

  # Multi language support: some strict versioning due to previous conflicts with cdo=1.9.7
  - python>=3.6
  - libunwind=1.3.1=hf484d3e_1000  # Needed for Python3.7+
  - tiledb=1.6.0=h69c774e_1  # Needed by the new ncl=6.6.2; evolved to 1.6.2 but ncl 6.6.2 still needs libtiledb1.6.0.so
  - ncl=6.6.2=had3379d_8  # agrees well with cdo=1.9.7.1
  - r-base=3.6.1=hba50c9b_4
  - r-curl=4.0=r36hcdcec82_0  # Dependency of lintr, but fails to compile because it cannot find libcurl installed from conda.
  - r-udunits2=0.13=r36hcdcec82_1003  # Fails to compile because it cannot find udunits2 installed from conda.
